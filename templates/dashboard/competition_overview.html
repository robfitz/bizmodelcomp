{% extends 'dashboard/tab_section.html' %}

{% block section_style %}margin-bottom:16px;width:70%;{% endblock %}

{% block section_title %}
    {% load max_chars %}
    {{ competition.name|max_chars:23 }}
{% endblock %}

{% block tab_list %}
<li id="tab_applications"><a href="#applications">Progress</a></li>
                <li id="tab_setup"><a href="#setup">Setup</a></li>
{% endblock %}

{% block tab_divs %}

    <div id="setup">

        <div class="half_width">

            <div style="float:left;width:100%;">
                {% if competition.logo %}
                    <img style="max-width:200px;" src="{{ competition.logo_url }}" /> 
                {% endif %}
            </div>

            <div class="stat_number">
                Current phase
                <h1>{{ competition.current_phase.phase_num }} of {{ competition.phases.count }}</h1> 
            </div>

           <div class="stat_number" style="textalign:left;">
               Pitch type
               {% ifequal competition.current_phase.pitch_type "online" %}
                   <h1>Online</h1>
               {% else %}
                   <h1>Live</h1>
               {% endifequal %}
           </div>

            <div class="hr">&nbsp;</div>

        </div>

        <div class="half_width">

            <p>
            <strong>Name:</strong> {{competition.name}}
            </p>

            <p>
            <strong>Application URL:</strong> <a href="/a/{{competition.hosted_url}}/?ignorejudging=true">nvana.com/a/{{competition.hosted_url}}</a>
            </p>

            <p>
               <a class="button" href="/dashboard/{{competition.hosted_url}}/setup/?edit_comp=yup">Edit competition details</a>
            </p>

        </div>

    </div>

    <div id="applications">

        <div class="">

            <!--
            <div style="float:left;width:100%;">
                {% if competition.logo %}
                    <img style="max-width:200px;" src="{{ competition.logo_url }}" /> 
                {% endif %}
            </div>
            -->

            
            <div class="stat_number">
                Num applications
                <h1>{{competition.current_phase.all_pitches.count}}</h1>
                <span class="medium"><a href="javascript:void(0);" onclick="popup('/dashboard/data/table/{{competition.hosted_url}}/?view=all_pitches&amp;phase_{{competition.current_phase.phase_num}}=on');">View all</a></span>
            </div>

            <div class="stat_number">
                Num Judges
                <h1>{{ competition.judge_invitations.count }}</h1>
                <a style="float:left;" href="javascript:void(0);" onclick="popup('/dashboard/phase/{{competition.current_phase.id}}/judges/');">Invite judges</a>
            </div>

            <div class="stat_number">
                Pitches judged
                <h1>{{ competition.current_phase.judgements.count}}</h1>
                <span class="medium"><a href="javascript:void(0);" onclick="popup('/dashboard/data/table/{{competition.hosted_url}}/?view=all_pitches&amp;phase_{{competition.current_phase.phase_num}}=on');">View all</a></span>
            </div>

            <div class="hr">&nbsp;</div>
            <p style="float:left;" class="medium">Please note that viewing all scores or applications can take up to 15 seconds to load fully. The screen will be darkened during this time. You may click near the left or right edge of the screen to cancel the load.</p>

        </div>

    </div>


{% endblock %}

{% block tabs_ready_script %}

        {% if competition.current_phase.setup_steps.details_confirmed  %}
            {% if competition.current_phase.is_judging_enabled %}
                var tab = "#applications";
            {% else %}
                var tab = "#applications";
            {% endif %}
        {% else %}
            var tab = "#setup";
        {% endif %}

        $("#tabs_{{competition.id}}").tabs("select", tab);

{% endblock %}
