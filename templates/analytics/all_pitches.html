{% extends 'dashboard/popup_section.html' %}

{% block section_title %}
All pitches
{% endblock %}

{% block section_content %}
    <form id="phase_filter" action="" method="GET">

        <input type="hidden" name="view" value="all_pitches" />

        <h3>Filter phases</h3>
        {% for phase in competition.phases %}

            <span style="padding-right:16px;">

                <input {% if phase in selected_phases %}checked="checked"{% endif %} type="checkbox" name="phase_{{phase.phase_num}}" id="phase_{{phase.id}}" {% if phase.pitches.all_pitches.count == 0 %}disabled{% endif %} />
                <label for="phase_{{phase.id}}">{{phase.name}}</label>

            </span>

        {% endfor %}

        <input type="submit" class="button" value="Show only these phases" />

    </form>

    <h3>All pitches</h3>

    <!--<a href="/dashboard/{{competition.hosted_url}}/next_phase/" class="button">Advance checked pitches to next phase</a>-->

    <!--
    <span id="toolbar" style="position:relative;padding:10px 4px;" class="ui-widget-header ui-corner-all"> 
        <span class="buttonset">
            <a href="javascript:void(0);" onclick="tag_selected('winner');" class="medium button" style="margin-right:0px;">Tag checked as winners</a>
            <a href="javascript:void(0);" onclick="$('#tag_dropdown').slideDown();" class="medium button" style="margin-left:0px;">Other tags</a>
        </span>

        <a href="" onclick="" style="margin-left:20px;" class="medium button">Displayed phases</a>

        <div id="tag_dropdown" class="hidden" style="padding:4px;position:absolute;left:200px;top:40px;width:160px;background-color:#ccc;min-height:100px;border:1px solid gray;">
            <input id="new_tag_name" value="New tag name" style="width:120px;" />
            <button style="width:35px;padding:2px;">Add</a>
            {% for tag in user_pitch_tags %}
            <div style="width:100%;" class="mouseover_highlight">
                {{ tag }}
            </div>

            {% endfor %}            
        </div>
    </span>
    -->

    <div class="hr" style="height:20px;">&nbsp;</div>

    <table class="spreadsheet" cellspacing="0">
        <thead>
            <tr>
                {% for th in header %}
                <th>{{th|safe}}</th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>

            {% for tr in rows %}
                <tr class="{% cycle 'odd' 'even' %}">
                    {% for td in tr %}
                        <td>{{td|safe}}</td>
                    {% endfor %}
                </tr>
            {% endfor %}

        </tbody>

    </table>

    <script language="javascript" type="text/javascript">
        $( function () {
            setTimeout("window_resize(dialog)", 1000);

            $(document).click( function() {
                $("#tag_dropdown").hide();
            });
            $("#tag_dropdown").click( function() {
                return false;
            });

            $("button").button();
            $(".button").button();
            $(".buttonset").buttonset();

            $(".mouseover_highlight").mouseenter( function () {
                $(this).addClass("highlighted");
            });
            $(".mouseover_highlight").mouseleave( function () {
                $(this).removeClass("highlighted");
            });

            $("#phase_filter").submit( function() {
                $("#dialog").load("/dashboard/data/table/{{competition.hosted_url}}/?" + $("form").serialize());
                return false;
            });
        });
    </script>

{% endblock %}
